<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Service Manager</title>
	<style>
		body {
			font-family: 'Segoe UI', Arial, sans-serif;
			background: #f7f7f9;
			margin: 0;
			padding: 0;
		}
		h1 {
			text-align: center;
			margin: 32px 0 16px 0;
			color: #333;
		}
		.slider-container {
			max-width: 900px;
			margin: 0 auto;
			background: #fff;
			border-radius: 12px;
			box-shadow: 0 2px 12px rgba(0,0,0,0.07);
			overflow: hidden;
			position: relative;
		}
		   .tab-bar {
			   display: flex;
			   justify-content: center;
			   background: #f0f0f3;
			   border-bottom: 1px solid #e0e0e0;
		   }
		   .tab {
			   padding: 12px 32px;
			   cursor: pointer;
			   font-weight: 500;
			   font-size: 1.1rem;
			   color: #444;
			   background: none;
			   border: none;
			   outline: none;
			   transition: background 0.15s;
		   }
		   .tab.active {
			   color: #0078d7;
			   border-bottom: 2px solid #0078d7;
			   background: #fff;
		   }
		   .tab:hover:not(.active) {
			   background: #e8e8ee;
		   }
		   .tab-content {
			   display: none;
			   padding: 32px 24px 40px 24px;
			   box-sizing: border-box;
		   }
		   .tab-content.active {
			   display: block;
		   }
		table {
			width: 100%;
			border-collapse: collapse;
			background: #fff;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 1px 4px rgba(0,0,0,0.04);
		}
		th, td {
			padding: 12px 10px;
			text-align: left;
			border-bottom: 1px solid #eee;
		}
		th {
			background: #f5f5f7;
			color: #222;
			font-weight: 600;
		}
		tr:last-child td {
			border-bottom: none;
		}
		@media (max-width: 700px) {
			.slider-container { max-width: 100vw; }
			.slide { padding: 16px 4vw 24px 4vw; }
		}
	</style>
</head>
<body>
	<h1>Service Manager</h1>
	   <div class="slider-container">
		   <div class="tab-bar">
			   <button class="tab active" data-tab="0">Dylibs</button>
			   <button class="tab" data-tab="1">Demos</button>
			   <button class="tab" data-tab="2">Services</button>
			   <button class="tab" data-tab="3">Apps</button>
		   </div>
		   <div class="tab-content active" data-content="0">
			   <h2>Dylibs</h2>
			   <div id="dylibs-loading">Loading...</div>
			   <table id="dylibs-table" style="display:none">
				   <thead>
					   <tr>
						   <th>Name</th>
						   <th>Path</th>
						   <th>Target</th>
						   <th>Size</th>
						   <th>Last Modified</th>
						   <th>Version</th>
						   <th>Description</th>
						   <th>Author</th>
						   <th>Docs</th>
					   </tr>
				   </thead>
				   <tbody></tbody>
			   </table>
		   </div>
		   <div class="tab-content" data-content="1">
			   <h2>Demos</h2>
			   <div id="demos-loading">Loading...</div>
			   <table id="demos-table" style="display:none">
				   <thead><tr><th>Name</th></tr></thead>
				   <tbody></tbody>
			   </table>
		   </div>
		   <div class="tab-content" data-content="2">
			   <h2>Services</h2>
			   <div id="services-loading">Loading...</div>
			   <table id="services-table" style="display:none">
				   <thead><tr><th>Name</th></tr></thead>
				   <tbody></tbody>
			   </table>
		   </div>
		   <div class="tab-content" data-content="3">
			   <h2>Apps</h2>
			   <div id="apps-loading">Loading...</div>
			   <table id="apps-table" style="display:none">
				   <thead><tr><th>Name</th></tr></thead>
				   <tbody></tbody>
			   </table>
		   </div>
	   </div>
	   <!-- Modal for docs iframe -->
	   <div id="docs-modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center;">
		   <div style="background:#fff;padding:0.5em 0.5em 0.5em 0.5em;border-radius:8px;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:stretch;">
			   <button id="close-docs" style="align-self:flex-end;margin-bottom:4px;">Close</button>
			   <iframe id="docs-iframe" src="" style="width:80vw;height:80vh;border:none;"></iframe>
		   </div>
	   </div>
	   <script>
		   const tabs = document.querySelectorAll('.tab');
		   const contents = document.querySelectorAll('.tab-content');
		   tabs.forEach(tab => {
			   tab.addEventListener('click', () => {
				   tabs.forEach(t => t.classList.remove('active'));
				   tab.classList.add('active');
				   const idx = tab.getAttribute('data-tab');
				   contents.forEach(c => {
					   if (c.getAttribute('data-content') === idx) {
						   c.classList.add('active');
					   } else {
						   c.classList.remove('active');
					   }
				   });
			   });
		   });

		   // Helper to format bytes
		   function formatBytes(bytes) {
			   if (bytes === 0) return '0 B';
			   const k = 1024, sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
			   const i = Math.floor(Math.log(bytes) / Math.log(k));
			   return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
		   }
		   // Helper to format date
		   function formatDate(ts) {
			   const d = new Date(ts * 1000);
			   return d.toLocaleString();
		   }

		   // Dylibs
		   fetch('/api/libraries').then(r => r.json()).then(libs => {
			   const table = document.getElementById('dylibs-table');
			   const loading = document.getElementById('dylibs-loading');
			   const tbody = table.querySelector('tbody');
			   tbody.innerHTML = '';
			   libs.forEach(lib => {
				   const tr = document.createElement('tr');
				   tr.innerHTML = `
					   <td>${lib.name}</td>
					   <td>${lib.path}</td>
					   <td>${lib.target_name || ''}</td>
					   <td>${formatBytes(lib.file_size)}</td>
					   <td>${formatDate(lib.last_modified)}</td>
					   <td>${lib.version || ''}</td>
					   <td>${lib.description || ''}</td>
					   <td>${lib.author || ''}</td>
					   <td>${lib.has_metadata ? `<button class='docs-btn' data-doc='${lib.name}'>Docs</button>` : ''}</td>
				   `;
				   tbody.appendChild(tr);
			   });
			   loading.style.display = 'none';
			   table.style.display = '';

			   // Docs button logic
			   document.querySelectorAll('.docs-btn').forEach(btn => {
				   btn.addEventListener('click', e => {
					   const libName = btn.getAttribute('data-doc');
					   // Try to guess doc path: /docs/libs/<libName>/html/index.html
					   let docPath = `/docs/libs/${libName.replace(/^lib/, '').replace(/\.[^.]+$/, '')}/html/index.html`;
					   document.getElementById('docs-iframe').src = docPath;
					   document.getElementById('docs-modal').style.display = 'flex';
				   });
			   });
		   });

		   // Demos
		   fetch('/api/demos').then(r => r.json()).then(demos => {
			   const table = document.getElementById('demos-table');
			   const loading = document.getElementById('demos-loading');
			   const tbody = table.querySelector('tbody');
			   tbody.innerHTML = '';
			   demos.forEach(name => {
				   const tr = document.createElement('tr');
				   tr.innerHTML = `<td>${name}</td>`;
				   tbody.appendChild(tr);
			   });
			   loading.style.display = 'none';
			   table.style.display = '';
		   });

		   // Services
		   fetch('/api/services').then(r => r.json()).then(services => {
			   const table = document.getElementById('services-table');
			   const loading = document.getElementById('services-loading');
			   const tbody = table.querySelector('tbody');
			   tbody.innerHTML = '';
			   services.forEach(name => {
				   const tr = document.createElement('tr');
				   tr.innerHTML = `<td>${name}</td>`;
				   tbody.appendChild(tr);
			   });
			   loading.style.display = 'none';
			   table.style.display = '';
		   });

		   // Apps
		   fetch('/api/apps').then(r => r.json()).then(apps => {
			   const table = document.getElementById('apps-table');
			   const loading = document.getElementById('apps-loading');
			   const tbody = table.querySelector('tbody');
			   tbody.innerHTML = '';
			   apps.forEach(name => {
				   const tr = document.createElement('tr');
				   tr.innerHTML = `<td>${name}</td>`;
				   tbody.appendChild(tr);
			   });
			   loading.style.display = 'none';
			   table.style.display = '';
		   });

		   // Docs modal close
		   document.getElementById('close-docs').onclick = () => {
			   document.getElementById('docs-modal').style.display = 'none';
			   document.getElementById('docs-iframe').src = '';
		   };
	   </script>
</body>
</html>
<!-- ...existing content... -->