# Production Proxy Configuration
# High-performance settings for production deployment

[proxy]
listen_port = 80
enable_ssl = false
ssl_cert_path = 
ssl_key_path = 
worker_threads = 8
max_connections = 5000
keepalive_timeout = 120
upstream_connect_timeout = 3
upstream_read_timeout = 30
enable_logging = true
max_cache_size = 524288000  # 500MB in bytes

# API Gateway - No caching for dynamic content
[route.api_v1]
path_prefix = /api/v1
enable_cache = false
cache_ttl_seconds = 0
balance_method = least_conn
upstreams = api-server-1:9001:2,api-server-2:9002:2,api-server-3:9003:1

# Metrics endpoint - Short cache to reduce backend load
[route.metrics]
path_prefix = /api/metrics
enable_cache = true
cache_ttl_seconds = 30
balance_method = round_robin
upstreams = metrics-server:9001:1

# Static assets - Aggressive caching
[route.static]
path_prefix = /static
enable_cache = true
cache_ttl_seconds = 86400  # 24 hours
balance_method = round_robin
upstreams = cdn-1:9010:2,cdn-2:9011:1

# Images - Long cache duration
[route.images]
path_prefix = /images
enable_cache = true
cache_ttl_seconds = 3600  # 1 hour
balance_method = weighted
upstreams = image-cdn-1:9020:3,image-cdn-2:9021:1

# Frontend application - Moderate caching
[route.frontend]
path_prefix = /
enable_cache = true
cache_ttl_seconds = 300  # 5 minutes
balance_method = round_robin
upstreams = web-server-1:3000:1,web-server-2:3001:1
